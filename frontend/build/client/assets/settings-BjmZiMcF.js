import{w as E}from"./with-props-W20A4A-s.js";import{r,n as A,l as e,L}from"./chunk-K6CSEXPM--6-6YwCy.js";import{A as T}from"./AuthContext-ChgrtSKK.js";import{P as F}from"./ProtectedRoute-WFYVxz1c.js";import{C as D}from"./circle-alert-ieDbjemo.js";import{C as M}from"./circle-check-big-TdVgapQe.js";import{B as R}from"./bell-Czj4pWCS.js";import{c as O}from"./createLucideIcon-DiAdES6P.js";import{L as $}from"./lock-BTppcPD9.js";import{S as I,L as z}from"./settings-zJGg6SF2.js";import{T as U}from"./trash-2-DM6o8tQ3.js";import{S as _}from"./save-Cfpy_75o.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],J=O("Shield",B),ae=E(function(){const{user:G,token:g,logout:p}=r.useContext(T),N=A(),[v,f]=r.useState(!1),[l,o]=r.useState(!1),[b,a]=r.useState(null),[y,c]=r.useState(null),[i,m]=r.useState(!1),[d,j]=r.useState({emailNotifications:!0,pushNotifications:!1,eventReminders:!0,marketingEmails:!1,darkMode:!1,language:"en",timezone:"UTC"}),[n,x]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[w,u]=r.useState(!1);r.useEffect(()=>{const s=localStorage.getItem("userSettings");if(s)try{j(JSON.parse(s))}catch{console.error("Failed to parse saved settings")}},[]);const h=(s,t)=>{j(P=>({...P,[s]:t}))},k=async()=>{o(!0),a(null);try{localStorage.setItem("userSettings",JSON.stringify(d)),await new Promise(s=>setTimeout(s,1e3)),c("Settings saved successfully!"),setTimeout(()=>c(null),3e3)}catch{a("Failed to save settings")}finally{o(!1)}},S=async()=>{if(n.newPassword!==n.confirmPassword){a("New passwords do not match");return}if(n.newPassword.length<8){a("Password must be at least 8 characters long");return}o(!0),a(null);try{const s=await fetch("https://eventqr.app/api/auth/change-password/",{method:"POST",headers:{Authorization:`Token ${g}`,"Content-Type":"application/json"},body:JSON.stringify({old_password:n.currentPassword,new_password:n.newPassword})});if(s.ok)c("Password changed successfully!"),x({currentPassword:"",newPassword:"",confirmPassword:""}),u(!1),setTimeout(()=>c(null),3e3);else{const t=await s.json();a(t.detail||"Failed to change password")}}catch{a("Network error: Could not change password")}finally{o(!1)}},C=async()=>{if(!i){m(!0);return}f(!0);try{(await fetch("https://eventqr.app/api/auth/delete-account/",{method:"DELETE",headers:{Authorization:`Token ${g}`}})).ok?(p(),N("/")):a("Failed to delete account")}catch{a("Network error: Could not delete account")}finally{f(!1),m(!1)}};return e.jsx(F,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto pt-20 pb-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-500 mb-4",children:[e.jsx(L,{to:"/",className:"hover:text-gray-700",children:"Home"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"Settings"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account preferences and privacy settings"})]}),b&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:b})]}),y&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 text-green-700 rounded-lg flex items-start gap-3",children:[e.jsx(M,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:y})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-gray-600",children:"Choose what notifications you want to receive"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive important updates via email"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.emailNotifications,onChange:s=>h("emailNotifications",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Event Reminders"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get reminded about upcoming events"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.eventReminders,onChange:s=>h("eventReminders",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Marketing Emails"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive tips and product updates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.marketingEmails,onChange:s=>h("marketingEmails",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Security"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account security settings"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update your account password"})]}),e.jsxs("button",{onClick:()=>u(!w),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"Change Password"})]})]}),w&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[e.jsx("input",{type:"password",placeholder:"Current password",value:n.currentPassword,onChange:s=>x(t=>({...t,currentPassword:s.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"password",placeholder:"New password",value:n.newPassword,onChange:s=>x(t=>({...t,newPassword:s.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:n.confirmPassword,onChange:s=>x(t=>({...t,confirmPassword:s.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:S,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:l?"Updating...":"Update Password"}),e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Account Actions"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Log Out"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sign out of your account"})]}),e.jsxs("button",{onClick:p,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:"Log Out"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Permanently delete your account and all data"})]}),e.jsxs("button",{onClick:C,disabled:v,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${i?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:i?"Confirm Delete":"Delete Account"})]})]}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Are you sure?"}),e.jsx("p",{className:"text-red-700 text-sm mb-3",children:"This action cannot be undone. All your events, data, and account information will be permanently deleted."}),e.jsx("button",{onClick:()=>m(!1),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:k,disabled:l,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Settings"})]})})})]})]})})})});export{ae as default};
