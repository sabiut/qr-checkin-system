import{w as E}from"./with-props-W20A4A-s.js";import{v as A,n as F,r as a,l as e}from"./chunk-K6CSEXPM--6-6YwCy.js";import{C as p}from"./circle-alert-ieDbjemo.js";import{C as R}from"./circle-check-big-TdVgapQe.js";import{H as q}from"./heart-DJvYK65H.js";import{C as Y}from"./clock-9uqc5bvb.js";import{M as P}from"./map-pin-Ci7QSU5N.js";import{M as T}from"./mail-Dab9SNH2.js";import{U as I}from"./user-CNUf_l29.js";import"./createLucideIcon-DiAdES6P.js";const b="https://eventqr.app",W=E(function(){const{token:o}=A();F();const[s,y]=a.useState(null),[f,j]=a.useState(!0),[x,h]=a.useState(!1),[c,d]=a.useState(null),[N,v]=a.useState(!1),[g,w]=a.useState(""),[m,k]=a.useState(""),[l,u]=a.useState("");a.useEffect(()=>{if(!o)return;(async()=>{try{const t=await fetch(`${b}/api/communication/icebreakers/guest_response/?token=${o}`);if(!t.ok){const i=await t.json();throw new Error(i.error||"Failed to load activity")}const n=await t.json();y(n)}catch(t){d(t instanceof Error?t.message:"Failed to load activity")}finally{j(!1)}})()},[o]);const S=async r=>{if(r.preventDefault(),!s||!m.trim()){d("Please fill in all required fields");return}h(!0),d(null);try{const t={token:o,guest_email:m.trim(),guest_name:g.trim(),response_data:_()},n=await fetch(`${b}/api/communication/icebreakers/guest_response/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to submit response")}v(!0)}catch(t){d(t instanceof Error?t.message:"Failed to submit response")}finally{h(!1)}},_=()=>{switch(s==null?void 0:s.activity_type){case"poll":case"quiz":return{selected_option:l};case"question":case"introduction":case"challenge":return{text:l};default:return{text:l}}},C=()=>{var r;if(!s)return null;switch(s.activity_type){case"poll":case"quiz":return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s.activity_data.question||"Select your answer:"}),e.jsx("div",{className:"space-y-2",children:(r=s.activity_data.options)==null?void 0:r.map((t,n)=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"radio",value:t,checked:l===t,onChange:i=>u(i.target.value),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-700",children:t})]},n))})]});case"question":case"challenge":return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"response",className:"block text-sm font-medium text-gray-700",children:s.activity_data.prompt||"Your response:"}),e.jsx("textarea",{id:"response",value:l,onChange:t=>u(t.target.value),placeholder:"Share your thoughts...",rows:4,className:"w-full px-4 py-2 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]});case"introduction":return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"introduction",className:"block text-sm font-medium text-gray-700",children:"Introduce yourself to other attendees:"}),e.jsx("textarea",{id:"introduction",value:l,onChange:t=>u(t.target.value),placeholder:"Tell us about yourself, your role, and what you're looking forward to at this event...",rows:6,className:"w-full px-4 py-2 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]});default:return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"response",className:"block text-sm font-medium text-gray-700",children:"Your response:"}),e.jsx("textarea",{id:"response",value:l,onChange:t=>u(t.target.value),placeholder:"Enter your response...",rows:4,className:"w-full px-4 py-2 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}};return f?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading activity..."})]})}):c&&!s?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(p,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unable to Load Activity"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Try Again"})]})})}):N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Response Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for participating in this icebreaker activity. Your response helps make the event more engaging for everyone!"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Next steps:"})," We encourage you to create an account to fully participate in event activities and earn points!"]})})]})})}):s?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mb-4",children:[e.jsx(q,{className:"h-3 w-3 mr-1"}),"Icebreaker Activity"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),e.jsx("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s.event.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),s.event.date," at ",s.event.time]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),s.event.location]})]})]}),s.points_reward>0&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["🏆 ",s.points_reward," points"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(with account)"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Share Your Response"}),e.jsx("p",{className:"text-gray-600",children:"Help break the ice and get to know fellow attendees!"})]}),c&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(p,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:c})]})}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),"Email Address *"]}),e.jsx("input",{id:"email",type:"email",value:m,onChange:r=>k(r.target.value),placeholder:"your@email.com",required:!0,className:"w-full px-4 py-2 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-600"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Your Name"]}),e.jsx("input",{id:"name",type:"text",value:g,onChange:r=>w(r.target.value),placeholder:"Your name (optional)",className:"w-full px-4 py-2 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-600"})]})]}),C(),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Privacy:"})," ",s.anonymous_responses?"Your response will be shared anonymously.":"Your response will be visible to other attendees with your name."]})}),e.jsx("button",{type:"submit",disabled:x||!m.trim()||!l,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:x?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Response"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Created by ",s.creator.first_name," ",s.creator.last_name,"(",s.creator.username,")"]})})]})]})})}):null});export{W as default};
